<!DOCTYPE html>
<html>
<head>
  <title>Debian Metrics Portal JavaScript Demo</title>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
  <script type="text/javascript" src="jquery.flot.js"></script>
  <script type="text/javascript" src="jquery.flot.time.js"></script>
  <script type="text/javascript">
    var plot;
    $(function() {
      var json = (function () {
        var json = null;
        $.ajax({
          'async': false,
          'global': false,
          'url': "dump.json",
          'dataType': "json",
          'success': function (data) {
            json = data;
          }
        });
        return json;
      })(); 
      plot = $("#placeholder").plot(json["coords"], {
        xaxis: { mode: "time" },
        legend: { show: true, container: "#legendholder" }
      }).data("plot");
    });

    function setAxis(element) {
      var unixtime = Date.parse(element.value)
      if (element.id == "start") {
        plot.getOptions().xaxes[0].min = unixtime;
      }
      if (element.id == "end") {
        plot.getOptions().xaxes[0].max = unixtime;
      }
      plot.setupGrid()
      plot.draw()
    }
  </script>
</head>
<body>
  <div id="placeholder" style="width:600px;height:300px;float:left"></div>
  <div id="legendholder" style="float:left"></div>
  <p>Start: <input type="text" id="start" onchange="setAxis(this)"></p>
  <p>End: <input type="text" id="end" onchange="setAxis(this)"></p>
</body>
</html>
